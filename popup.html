<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TwList</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>

    <!-- Header -->
    <header>
        <h1>TwList</h1>
        <div class="actions">
            <!-- Space for top-right actions if needed -->
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- List Manager Tab -->
        <div id="list-manager" class="tab-content active">
            <div class="card">
                <div class="form-group">
                    <label for="list-select">Select a List</label>
                    <div class="select-wrapper">
                        <select id="list-select">
                            <option value="">Loading lists...</option>
                        </select>
                    </div>
                </div>
                <div style="display: flex; gap: 8px;">
                    <button id="fetch-btn" class="btn btn-primary" disabled>
                        <span>Fetch Members</span>
                    </button>
                    <button id="delete-list-btn" class="btn btn-icon btn-danger" disabled title="Delete this list">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M16 6V4.5C16 3.12 14.88 2 13.5 2h-3C9.11 2 8 3.12 8 4.5V6H3v2h1.06l.81 11.21C4.98 20.78 6.28 22 7.86 22h8.27c1.58 0 2.88-1.22 3.01-2.79L19.94 8H21V6h-5zm-6-1.5c0-.28.22-.5.5-.5h3c.27 0 .5.22.5.5V6h-4V4.5zm7.13 14.57c-.04.52-.47.93-1.01.93H7.86c-.53 0-.96-.41-1-1.06L6.07 8h11.85l-.79 11.07zM9 17v-6h2v6H9zm4 0v-6h2v6h-2z"></path></svg>
                    </button>
                </div>
            </div>

            <div class="card">
                <label for="members-textarea">Members <span id="member-count" style="font-weight: 400; color: var(--text-secondary); margin-left: 4px;"></span></label>
                <textarea id="members-textarea" placeholder="Select a list to view members..."></textarea>
                <div style="margin-top: 12px; display: flex; justify-content: flex-end;">
                  <button id="save-changes-btn" class="btn btn-primary" style="display: none;">Save Changes</button>
                </div>
            </div>
            
            <div id="status" class="status-container"></div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content hidden">
            <div class="section-title">Safety Settings</div>
            <div class="section-subtitle">Choose how aggressively to check memberships to avoid rate limits.</div>

            <div class="preset-grid">
                <div class="preset-card" data-preset="conservative">
                    <div class="preset-icon">üê¢</div>
                    <div class="preset-info">
                        <div class="preset-name">Conservative</div>
                        <div class="preset-desc">Slow & steady. Best for main accounts.</div>
                        <div class="badge">Safest</div>
                    </div>
                </div>

                <div class="preset-card selected" data-preset="balanced">
                    <div class="preset-icon">‚öñÔ∏è</div>
                    <div class="preset-info">
                        <div class="preset-name">Balanced</div>
                        <div class="preset-desc">Recommended speed.</div>
                        <div class="badge">Default</div>
                    </div>
                </div>

                <div class="preset-card" data-preset="aggressive">
                    <div class="preset-icon">üöÄ</div>
                    <div class="preset-info">
                        <div class="preset-name">Aggressive</div>
                        <div class="preset-desc">Fast. Higher risk of rate limits.</div>
                        <div class="badge">Risky</div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 24px;">
                <label class="form-group" style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
                    <input type="checkbox" id="skip-membership-check" style="width: 20px; height: 20px;">
                    <div>
                        <div style="font-weight: 700;">Quick Mode</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">Skip checking current memberships (Fastest)</div>
                    </div>
                </label>
            </div>

            <div style="margin-top: 24px; display: grid; gap: 12px;">
                <button id="save" class="btn btn-primary">Save Settings</button>
                <button id="clear-cache" class="btn btn-secondary">Clear Cache</button>
            </div>
            
             <div class="status-container">
                <div id="current-status" style="font-size: 12px; color: var(--text-secondary); text-align: center; margin-top: 16px;"></div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="nav-item active" data-tab="list-manager">
            <svg viewBox="0 0 24 24"><path d="M3 4.5C3 3.12 4.12 2 5.5 2h13C19.88 2 21 3.12 21 4.5v15c0 1.38-1.12 2.5-2.5 2.5h-13C4.12 22 3 20.88 3 19.5V4.5zM5.5 4c-.28 0-.5.22-.5.5v15c0 .28.22.5.5.5h13c.27 0 .5-.22.5-.5V4.5c0-.28-.22-.5-.5-.5h-13zM16 10H8V8h8v2zm-8 2h8v2H8v-2z"></path></svg>
            <span>Lists</span>
        </button>
        <button class="nav-item" data-tab="settings">
            <svg viewBox="0 0 24 24"><path d="M13.5 2c-1.38 0-2.5 1.12-2.5 2.5v.5h-1v-.5C10 3.12 8.88 2 7.5 2S5 3.12 5 4.5v.5h-1v-.5C4 3.12 2.88 2 1.5 2H0v22h24V2h-1.5C21.12 2 20 3.12 20 4.5v.5h-1v-.5C19 3.12 17.88 2 16.5 2s-2.5 1.12-2.5 2.5v.5h-1v-.5c0-1.38-1.12-2.5-2.5-2.5zM2 4h1v18H2V4zm3 .5c0-.28.22-.5.5-.5s.5.22.5.5v.5h-1v-.5zm1 1.5h-1v16h1V6zm2-.5c0-.28.22-.5.5-.5s.5.22.5.5v.5h-1v-.5zm1 1.5H8v16H8V6zm3 .5c0-.28.22-.5.5-.5s.5.22.5.5v.5h-1v-.5zm1 1.5h-1v16h1V6zm3-.5c0-.28.22-.5.5-.5s.5.22.5.5v.5h-1v-.5zm1 1.5h-1v16h1V6zm3-.5c0-.28.22-.5.5-.5s.5.22.5.5v.5h-1v-.5zm1 1.5h-1v16h1V6z"></path><path d="M12 22a9.97 9.97 0 0 0 3.25-10.84 5.99 5.99 0 0 0-4.04-4.04A9.99 9.99 0 1 0 12 22zM8.07 15.93a4.004 4.004 0 0 1 7.86 0 8.003 8.003 0 0 1-7.86 0z"></path></svg>
            <span>Settings</span>
        </button>
    </nav>

    <script src="popup.js"></script>
</body>
</html>